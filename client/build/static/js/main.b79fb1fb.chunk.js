(this.webpackJsonpscheddit=this.webpackJsonpscheddit||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(1),s=n.n(a),r=n(7),i=n.n(r),l=n(2),o=Object(a.createContext)({}),d=function(e){var t=e.children,n=Object(a.useState)(!1),s=Object(l.a)(n,2),r=s[0],i=s[1],d=Object(a.useState)(null),u=Object(l.a)(d,2),j=u[0],h=u[1],b=Object(a.useState)(!0),O=Object(l.a)(b,2),m=O[0],f=O[1];return Object(c.jsx)(o.Provider,{value:{isAuth:r,userName:j,isLoading:m,setAuthData:function(e){i(e)},setLoadingState:function(e){f(e)},setUserData:function(e){h(e)}},children:t})},u=n(6);function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e}).apply(this,arguments)}function h(e,t){if(null==e)return{};var n,c,a=function(e,t){if(null==e)return{};var n,c,a={},s=Object.keys(e);for(c=0;c<s.length;c++)n=s[c],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(c=0;c<s.length;c++)n=s[c],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var b=a.createElement("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"});function O(e,t){var n=e.title,c=e.titleId,s=h(e,["title","titleId"]);return a.createElement("svg",j({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",ref:t,"aria-labelledby":c},s),n?a.createElement("title",{id:c},n):null,b)}var m=a.forwardRef(O),f=(n.p,function(e){var t=e.currImageSrc,n=e.currImageAlt,a=e.setModalActive;return Object(c.jsxs)("div",{className:"modal-background",children:[Object(c.jsx)("div",{className:"image-modal",children:Object(c.jsx)("img",{src:t,alt:n})}),Object(c.jsx)("button",{className:"image-modal_close exit-btn",onClick:function(){a(!1)},children:Object(c.jsx)(m,{})})]})}),g=function(){return Object(c.jsxs)("div",{className:"loading-container",children:[Object(c.jsx)("span",{className:"loading loading-anim_1",children:"."}),Object(c.jsx)("span",{className:"loading loading-anim_2",children:"."}),Object(c.jsx)("span",{className:"loading loading-anim_3",children:"."})]})},p=function(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),n=t[0],s=t[1],r=Object(a.useState)(!1),i=Object(l.a)(r,2),d=i[0],j=i[1],h=Object(a.useState)([]),b=Object(l.a)(h,2),O=b[0],m=b[1],p=Object(a.useState)(1),x=Object(l.a)(p,2),v=x[0],w=x[1],N=Object(a.useState)(!1),y=Object(l.a)(N,2),S=y[0],A=y[1],C=Object(a.useState)(!1),k=Object(l.a)(C,2),L=(k[0],k[1],Object(a.useContext)(o).userName),E=function(e){var t=O.find((function(t){return t.title===e.target.alt})),n=t.imgFull,c=t.title;s({src:n,alt:c}),j(!0)},_=function(){A(!0),fetch("http://localhost:8081/dashboard/".concat(v),{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-type":"application/json","Access-Control-Allow-Credentials":!0}}).then((function(e){if(200===e.status)return e.json();throw new Error("Failed to retrieve subreddits")})).then((function(e){m(1!==v?function(t){return[].concat(Object(u.a)(t),Object(u.a)(e))}:e),A(!1)})).catch((function(e){console.error(e)}))};return Object(a.useEffect)((function(){_()}),[]),Object(a.useEffect)((function(){O.length>1&&w(O.slice(O.length-1)[0].postFullname)}),[O]),Object(c.jsxs)("main",{className:"dashboard-container",children:[Object(c.jsx)("aside",{className:"dashboard-header",children:Object(c.jsxs)("h2",{className:"dashboard-header_text",children:["Showing saved content for u/",L]})}),Object(c.jsx)("section",{className:"image-container",children:O?O.map((function(e){return Object(c.jsx)("img",{className:"image-container_item img-med",onClick:E,src:e.imgMed,alt:e.title},e.postFullname)})):Object(c.jsx)("p",{children:"No saved images found."})}),O&&!S?Object(c.jsx)("button",{className:"btn",onClick:_,children:Object(c.jsx)("p",{children:"Load More"})}):Object(c.jsx)(g,{}),n&&d?Object(c.jsx)(f,{currImageSrc:n.src,currImageAlt:n.alt,setModalActive:j}):null]})},x=function(e){return Object(c.jsx)(s.a.Fragment,{children:Object(c.jsxs)("section",{className:"login",children:[Object(c.jsx)("h2",{className:"login-header",children:"Log In"}),Object(c.jsx)("p",{className:"login-description",children:"Click the link to sign in through Reddit."}),Object(c.jsx)("a",{className:"high-contrast-btn login-link",href:"http://localhost:8081/auth/reddit",children:"Login"})]})})},v=function(e){return Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsxs)("header",{className:"welcome",children:[Object(c.jsx)("h1",{className:"welcome-header_text",children:"Welcome!"}),Object(c.jsx)("p",{className:"welcome-description_text",children:"This app uses the Reddit API to quickly consolidate and display all images saved to your account. To begin using this app, log in through Reddit below. Don't worry, we wont have access to your Reddit password."})]}),Object(c.jsx)(x,{})]})},w=function(e){var t=Object(a.useContext)(o),n=t.isAuth,s=(t.userName,t.setAuthData),r=t.setLoadingState,i=t.setUserData;return Object(a.useEffect)((function(){fetch("http://localhost:8081/auth/login/success",{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-type":"application/json","Access-Control-Allow-Credentials":!0}}).then((function(e){if(r(!0),200===e.status)return e.json();throw new Error("Failed to authenticate user")})).then((function(e){s(!0),r(!1),i(e.user)})).catch((function(e){s(!1),i(null),r(!0),console.error(e)}))}),[]),Object(c.jsx)(c.Fragment,{children:n?Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(p,{})}):Object(c.jsx)(v,{})})},N=function(){var e=Object(a.useContext)(o),t=e.isAuth,n=e.setAuthData,s=e.setLoadingState;return Object(c.jsx)("nav",{className:"navbar",children:Object(c.jsx)("ul",{className:"navbar-list",children:t?Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("li",{className:"high-contrast-btn navbar-list_item",onClick:function(){window.open("http://localhost:8081/auth/logout","_self"),n(!1)},children:"Logout"})}):Object(c.jsx)("li",{className:"high-contrast-btn navbar-list_item",onClick:function(){window.open("http://localhost:8081/auth/reddit","_self"),s(!0)},children:"Login"})})})};var y=function(){return Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)(N,{}),Object(c.jsx)(w,{})]})};n(13);i.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(d,{children:Object(c.jsx)(y,{})})}),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.b79fb1fb.chunk.js.map