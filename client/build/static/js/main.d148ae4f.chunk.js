(this.webpackJsonpscheddit=this.webpackJsonpscheddit||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(1),s=n.n(a),r=n(7),l=n.n(r),i=n(2),o=Object(a.createContext)({}),u=function(e){var t=e.children,n=Object(a.useState)(!1),s=Object(i.a)(n,2),r=s[0],l=s[1],u=Object(a.useState)(null),j=Object(i.a)(u,2),d=j[0],h=j[1],b=Object(a.useState)(!0),O=Object(i.a)(b,2),m=O[0],f=O[1];return Object(c.jsx)(o.Provider,{value:{isAuth:r,userName:d,isLoading:m,setAuthData:function(e){l(e)},setLoadingState:function(e){f(e)},setUserData:function(e){h(e)}},children:t})},j=n(6);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e}).apply(this,arguments)}function h(e,t){if(null==e)return{};var n,c,a=function(e,t){if(null==e)return{};var n,c,a={},s=Object.keys(e);for(c=0;c<s.length;c++)n=s[c],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(c=0;c<s.length;c++)n=s[c],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var b=a.createElement("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"});function O(e,t){var n=e.title,c=e.titleId,s=h(e,["title","titleId"]);return a.createElement("svg",d({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",ref:t,"aria-labelledby":c},s),n?a.createElement("title",{id:c},n):null,b)}var m=a.forwardRef(O),f=(n.p,function(e){var t=e.currImageSrc,n=e.currImageAlt,a=e.setModalActive;return Object(c.jsxs)("div",{className:"modal-background",children:[Object(c.jsx)("div",{className:"image-modal",children:Object(c.jsx)("img",{src:t,alt:n})}),Object(c.jsx)("button",{className:"image-modal_close exit-btn",onClick:function(){a(!1)},children:Object(c.jsx)(m,{})})]})}),g=function(){return Object(c.jsxs)("div",{className:"loading-container",children:[Object(c.jsx)("span",{className:"loading loading-anim_1",children:"."}),Object(c.jsx)("span",{className:"loading loading-anim_2",children:"."}),Object(c.jsx)("span",{className:"loading loading-anim_3",children:"."})]})},x=function(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],s=t[1],r=Object(a.useState)(!1),l=Object(i.a)(r,2),u=l[0],d=l[1],h=Object(a.useState)([]),b=Object(i.a)(h,2),O=b[0],m=b[1],x=Object(a.useState)(1),p=Object(i.a)(x,2),v=p[0],N=p[1],w=Object(a.useState)(!1),S=Object(i.a)(w,2),y=S[0],E=S[1],k=Object(a.useState)(!1),A=Object(i.a)(k,2),C=(A[0],A[1],Object(a.useContext)(o).userName),F=function(e){var t=O.find((function(t){return t.title===e.target.alt})),n=t.imgFull,c=t.title;s({src:n,alt:c}),d(!0)},L=function(){E(!0),fetch("".concat("http://localhost:8081/dashboard","/").concat(v),{mode:"cors",method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}).then((function(e){if(200===e.status)return e.json();throw new Error("Failed to retrieve subreddits")})).then((function(e){m(1!==v?function(t){return[].concat(Object(j.a)(t),Object(j.a)(e))}:e),E(!1)})).catch((function(e){console.error(e)}))};return Object(a.useEffect)((function(){L()}),[]),Object(a.useEffect)((function(){O.length>1&&N(O.slice(O.length-1)[0].postFullname)}),[O]),Object(c.jsxs)("main",{className:"dashboard-container",children:[Object(c.jsx)("aside",{className:"dashboard-header",children:Object(c.jsxs)("h1",{className:"dashboard-header_text",children:["Showing saved content for"," ",Object(c.jsxs)("span",{className:"contrast-text",children:["u/",C]})]})}),Object(c.jsx)("section",{className:"image-container",children:O?O.map((function(e){return Object(c.jsx)("img",{className:"image-container_item img-med",onClick:F,src:e.imgMed,alt:e.title},e.postFullname)})):Object(c.jsx)("p",{children:"No saved images found."})}),O&&!y?Object(c.jsx)("button",{className:"btn",onClick:L,children:Object(c.jsx)("p",{children:"Load More"})}):Object(c.jsx)(g,{}),n&&u?Object(c.jsx)(f,{currImageSrc:n.src,currImageAlt:n.alt,setModalActive:d}):null]})},p=function(e){var t=e.url;return Object(c.jsx)(s.a.Fragment,{children:Object(c.jsx)("section",{className:"login",children:Object(c.jsx)("a",{className:"high-contrast-btn login-link",href:t,children:"Login"})})})},v=function(e){var t="http://localhost:8081/auth/reddit";return console.log(t),Object(c.jsx)(s.a.Fragment,{children:Object(c.jsxs)("section",{className:"welcome",children:[Object(c.jsx)("h1",{className:"welcome-header_text",children:"All of your saved images"}),Object(c.jsx)("h2",{className:"welcome-subhead",children:"in one convenient place"}),Object(c.jsx)("p",{className:"welcome-description_text",children:"Log in through Reddit and we\u2019ll take care of the rest. You will be able to scroll through all images saved to your Reddit account to your heart\u2019s content."}),Object(c.jsx)(p,{url:t})]})})},N=function(e){var t=Object(a.useContext)(o),n=t.isAuth,s=t.setAuthData,r=t.setLoadingState,l=t.setUserData;return Object(a.useEffect)((function(){fetch("http://localhost:8081/auth/login/success",{mode:"cors",method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}).then((function(e){if(r(!0),200===e.status)return e.json();throw new Error("Failed to authenticate user")})).then((function(e){s(!0),r(!1),l(e.user)})).catch((function(e){s(!1),l(null),r(!0),console.error(e)}))}),[]),Object(c.jsx)(c.Fragment,{children:n?Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(x,{})}):Object(c.jsx)(v,{})})},w=function(){var e=Object(a.useContext)(o),t=e.isAuth,n=e.setAuthData;e.setLoadingState;return Object(c.jsx)("nav",{className:"navbar",children:Object(c.jsx)("ul",{className:"navbar-list",children:t?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("h1",{className:"navbar-title",children:"Saveddit"}),Object(c.jsx)("li",{className:"high-contrast-btn-sm navbar-list_item",onClick:function(){window.open("https://aqueous-hollows-02149.herokuapp.com/auth/logout","_self"),n(!1)},children:"Sign out"})]}):Object(c.jsx)("h1",{className:"navbar-title",children:"Saveddit"})})})};var S=function(){return Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)(w,{}),Object(c.jsx)(N,{})]})};n(13);l.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(u,{children:Object(c.jsx)(S,{})})}),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.d148ae4f.chunk.js.map